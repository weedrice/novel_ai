spring.application.name=api-server
server.port=8080

# Timezone 설정
spring.jackson.time-zone=Asia/Seoul
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Seoul

# PostgreSQL Database
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/novel_ai}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:dev}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:dev1234}
spring.datasource.driver-class-name=org.postgresql.Driver

# Database Auto-Creation
app.database.name=${DATABASE_NAME:novel_ai}

# JPA 설정
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# 초기 데이터 로딩
# never: data.sql을 실행하지 않음 (프로덕션 권장, 중복 삽입 방지)
# always: 매번 data.sql 실행 (첫 설치 시에만 사용, 이후 never로 변경 권장)
# 참고: data.sql의 모든 INSERT는 ON CONFLICT DO NOTHING으로 중복 방지됨
# 첫 실행 후에는 never로 변경하여 불필요한 중복 실행 방지
spring.sql.init.mode=never
spring.jpa.defer-datasource-initialization=true
spring.sql.init.encoding=UTF-8

# HTTP 인코딩 설정
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Actuator 비활성화 (불필요한 엔드포인트 제거)
management.endpoints.enabled-by-default=false

# Redis 설정 (Task 90: API 응답 캐싱)
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.cache.type=redis
spring.cache.redis.time-to-live=600000

# Neo4j 설정 (Phase 9: GraphDB)
spring.neo4j.uri=${NEO4J_URI:bolt://localhost:7687}
spring.neo4j.authentication.username=${NEO4J_USERNAME:neo4j}
spring.neo4j.authentication.password=${NEO4J_PASSWORD:password}
# Neo4j와 JPA 동시 사용 설정
spring.data.neo4j.repositories.type=imperative

# OpenAI API 설정 (Phase 7: Vector DB & Semantic Search)
openai.api-key=${OPENAI_API_KEY:}
openai.embedding-model=text-embedding-ada-002

# CORS 설정
# 쉼표로 구분된 여러 오리진 지원 (예: http://localhost:3000,https://example.com)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:*}

# JWT 설정 (개발 환경)
# WARN: 프로덕션 환경에서는 환경 변수로 관리해야 합니다
jwt.secret=novelAiJwtSecretKey2025ForDevelopmentOnlyDoNotUseInProductionPleaseReplaceWithEnvironmentVariable
# Access Token: 15분 (900000ms = 15 * 60 * 1000)
jwt.access-token-expiration=900000
# Refresh Token: 7일 (604800000ms = 7 * 24 * 60 * 60 * 1000)
jwt.refresh-token-expiration=604800000
# 레거시 설정 (하위 호환성)
jwt.expiration=900000
